define(["jquery","slick","selectric","blazy",'Magento_Ui/js/modal/modal','jscroll','accordion','mage/mage',],function($,modal){"use strict";var brm={init:function(){this.documentReady(this);this.documentResize(this);this.scrollToTop();this.autoOpenCart();},documentReady:function($this){$(document).ready(function($){var wWidth=$(window).width();var wHeight=$(window).width();$this.smothScroll();var Blazy=require('blazy');var bLazy;if(window.matchMedia("(max-width: 760px)").matches){$('.lazy[data-mobile-source]').each(function(){$(this).attr('data-src',$(this).attr('data-mobile-source'));});}
bLazy=new Blazy({selector:'.lazy'});if(window.matchMedia("(max-width: 992px)").matches){$('.mobile-view span').on('click',function(){$('.mobile-view span').removeClass('active');$(this).addClass('active');if($('.list-view').hasClass('active')){$('.product-items').addClass('list-active');}else{$('.product-items').removeClass('list-active');}});}
$('body').on('setPosition',function(){bLazy.revalidate();});$('.header-controls .controls').click(function(e){if($('body').hasClass('nav-before-open')){$('.action.nav-toggle').trigger('click');}
$('.header-controls li.active').not($(this).parent()).each(function(){$(this).removeClass('active');$($(this).find('.control').data('target')).removeClass('active');});$(this).parent('li').toggleClass('active');$($(this).data('target')).toggleClass('active');if($(window).width()<992){$('body').toggleClass('noscroll');}
if($('.mobile-search-icon').hasClass('search-open')){$('.mobile-active').slideToggle();$('.mobile-search-icon').removeClass('search-open')}});$('.search-close').click(function(event){$('#header-search').hide();});$('.mobile-search-icon').click(function(event){$('.mobile-active').slideToggle();$('.header-controls li.active').each(function(){$(this).removeClass('active');$($(this).find('.control').data('target')).removeClass('active');});if($('.header-nav').hasClass('nav-open')){$('.action.nav-toggle').trigger('click');}});$('.action.showcart').click(function(e){$('.header-controls li.active').each(function(){$(this).removeClass('active');$($(this).find('.controls').data('target')).removeClass('active');});if($('.header-nav').hasClass('nav-open')){$('.header-nav').removeClass('nav-open');$('body').removeClass('nav-before-open');}
if($('.mobile-search-icon').hasClass('search-open')){$('.mobile-active').slideToggle();$('.mobile-search-icon').removeClass('search-open')}});$('.action.nav-toggle').on('click',function(){if($('.header-controls li').hasClass('active')){$('.header-controls .controls').trigger('click');}
$('.header-nav').toggleClass('nav-open');$('body').toggleClass('nav-before-open');if($('.mobile-search-icon').hasClass('search-open')){$('.mobile-active').slideToggle();$('.mobile-search-icon').removeClass('search-open')}});if(wWidth<768){$('.navigation .nav-wrap .container .level0.submenu').each(function(index,el){$(this).appendTo($(this).parents('.level0'));});}
$('.navigation li.parent').click(function(){});$('.navigation li.parent > a').click(function(e){if(wWidth<992){e.preventDefault();$(this).toggleClass('active');$(this).parent().find('> .submenu').slideToggle();return false;}});$('.mobile-search-icon').on('click',function(){$('.mobile-search-icon').toggleClass('search-open');});$('.nav-sections-item-title').on('click',function(){var element=document.querySelector("html");element.classList.slideToggle('nav-before-open');element.classList.slideToggle('nav-open');});$('#accordion-account').accordion({active:[],collapsible:true,openedState:"active",multipleCollapsible:false});if($('.customer-account-index').length){$('.account-nav .account-nav-title .account-title').click();}
var dataForm=$('#form-validate');var ignore=null;dataForm.mage('validation',{ignore:ignore?':hidden:not('+ignore+')':':hidden'}).find('input:text').attr('autocomplete','off');$('.mobile-footer-links').click(function(event){$(this).next('.open-list').slideToggle();$(this).toggleClass('links-open');});if(wWidth>992){var dt=$('.filter-options dt'),dd=$('.filter-options dd');dt.next().hide();dd.first().show();dt.first().addClass('active');dt.click(function(){$(this).toggleClass('active').next().slideToggle();})}
jQuery('select:not(#region_id):not(#country_id)').selectric({disableOnMobile:false,nativeOnMobile:false});$(document).ajaxComplete(function(){jQuery('select:not(#region_id):not(#country_id)').selectric({disableOnMobile:false,nativeOnMobile:false});});$this.fullWidthSlider($('.full-width-slider'));if($(window).width()<992){$(document).on("click",'.filter-title',function(){$(this).parent().toggleClass('active');if($(this).parent().find(".icon-filter").text()=='Show filters'){$(this).parent().find(".icon-filter").text("Close filters");}else{$(this).parent().find(".icon-filter").text("Show filters");}
$(this).find("span").toggleClass("title-black-square title-red-square");});$('#layered-filter-block-container').insertBefore('#layer-product-list');}else{$('#layered-filter-block-container').appendTo('.sidebar-main');}
$this.productCarousle($('.home-products .products , .post-related-product .product-items'));$('.products-upsell ol').slick({arrows:true,dots:false,slidesToShow:4,slidesToScroll:2,infinite:true,autoplay:false,centerMode:false,focusOnSelect:true,responsive:[{breakpoint:480,settings:{dots:true,appendDots:$('.block.upsell .block-title'),slidesToShow:1,centerMode:true,arrows:false,centerPadding:'40px'}},{breakpoint:992,settings:{dots:true,appendDots:$('.block.upsell .block-title'),slidesToShow:3,centerMode:false,arrows:false,centerPadding:'0'}}]});$('.products-related ol').slick({arrows:false,dots:true,infinite:true,autoplay:false,slidesToShow:3,slidesToScroll:3,centerMode:false,appendDots:$('.block.related .block-title'),responsive:[{breakpoint:768,settings:{slidesToShow:1,centerMode:true,centerPadding:'40px'}}]});$('.related-order-items').slick({arrows:true,dots:false,infinite:true,autoplay:false,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:768,settings:{slidesToShow:1,}}]});$(".account .mobile-nav").click(function(){$(".account .account-nav").slideToggle();});if($("#account-links-collapsible").length){$("#account-links-collapsible").collapsible("activate");}
$(".opc-wrapper .field input,.opc-wrapper .field textarea").focusin(function(){console.log('clicked');$(this).parent().parent().addClass('active');});$(".opc-wrapper .field input,.opc-wrapper .field textarea").blur(function(){console.log('out clicked');$(this).parent().parent().removeClass('active');});$('.field input, .field textarea').blur(function(){var me=$(this);if(me.val()==""){me.removeClass('active');}else{me.addClass('active');}});$('.lookbook-slider ').slick({arrows:false,fade:false,dots:true,infinite:true,speed:300,slidesToShow:3,slidesToScroll:3,infinite:true,responsive:[{breakpoint:99999,settings:{appendDots:$(this).find('.right-slider'),}},{breakpoint:992,settings:{arrows:false,dots:true,centerMode:true,centerPadding:'60px',slidesToShow:1}}]});$('.product-options-bottom input.qty , .product-add-form input.qty').each(function(index,el){var inputs=$(this).not('.handled');inputs.wrap('<div class="quantity-wrap"></div>').after('<span id="qtyplus" class="qty-controler plus"></span>').before('<span id="qtyminus" class="qty-controler minus"></span>').addClass('handled');inputs.parent().find(".plus").click(function(){var qtyEle=$(this).prev('input[type="number"]');var currentVal=parseInt(qtyEle.val());if(!currentVal||currentVal==""||currentVal=="NaN")currentVal=0;if(qtyEle.attr('data-max')&&currentVal>=parseInt(qtyEle.attr('data-max'))){currentVal=currentVal-1;}
$(this).prev('input[type="number"]').val(currentVal+1).change();});inputs.parent().find(".minus").click(function(){var currentVal=parseInt($(this).next('input[type="number"]').val());if(currentVal=="NaN")currentVal=1;if(currentVal>1){$(this).next('input[type="number"]').val(currentVal-1).change();}});});$('.home-product-slider .product-items').slick({arrows:true,fade:false,dots:false,infinite:true,speed:300,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:768,settings:{arrows:true,dots:true,centerMode:true,centerPadding:'10px',slidesToShow:1}},{breakpoint:480,settings:{arrows:true,dots:true,centerMode:true,centerPadding:'10px',slidesToShow:1}}]});$('.pagebuilder-product-slider .product-items').slick({arrows:false,fade:false,dots:true,infinite:true,speed:300,slidesToShow:3,slidesToScroll:3,autoplay:true,responsive:[{breakpoint:768,settings:{arrows:false,dots:true,centerMode:true,centerPadding:'40px',slidesToShow:1}},{breakpoint:480,settings:{arrows:false,dots:true,centerMode:true,centerPadding:'40px',slidesToShow:1}}]});if($('.cms-index-index').length){$('.pagebuilder-slide-wrapper .pagebuilder-collage-content').css("margin-left",$('.row-full-width-inner').offset().left);$('.pagebuilder-slider').on('init',function(event,slick,currentSlide){$("div[data-content-type='slider'] .slick-dots").css("left",$('.row-full-width-inner').offset().left+30);});}
$('.about-home').slick({arrows:false,fade:false,dots:false,infinite:true,speed:300,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:99999,settings:"unslick"},{breakpoint:767,settings:{arrows:false,dots:false,centerMode:true,centerPadding:'80px',slidesToShow:1}}]});$('.featured-post-slider').slick({arrows:true,fade:false,dots:false,infinite:true,speed:300,slidesToShow:1,slidesToScroll:1,});if($('.post-list').length){$('a.action.next span:last-child').html('Load more');$('.post-list-wrapper').jscroll({nextSelector:'a.action.next',contentSelector:'.post-list-wrapper',loadingHtml:'<div class="postListPager side-doted"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 128 128"> <g> <circle cx="16" cy="64" r="16"/> <circle cx="16" cy="64" r="14" transform="rotate(45 64 64)"/> <circle cx="16" cy="64" r="13" transform="rotate(90 64 64)"/> <circle cx="16" cy="64" r="11" transform="rotate(135 64 64)"/> <circle cx="16" cy="64" r="10" transform="rotate(180 64 64)"/> <circle cx="16" cy="64" r="8" transform="rotate(225 64 64)"/> <circle cx="16" cy="64" r="6" transform="rotate(270 64 64)"/> <circle cx="16" cy="64" r="5" transform="rotate(315 64 64)"/> <animateTransform attributeName="transform" calcMode="discrete" dur="720ms" repeatCount="indefinite" type="rotate" values="0 64 64;315 64 64;270 64 64;225 64 64;180 64 64;135 64 64;90 64 64;45 64 64"/> </g></svg><span>Loading More</span></div>',autoTrigger:false,callback:appendPosts,});}
function appendPosts(){$('.post-list').addClass('paged');$('.jscroll-added .post-list').find('li.item').each(function(index,el){$('.jscroll-inner .post-list').append($(el));});$('.jscroll-added').remove();}});},documentResize:function($this){jQuery(document).on('ready',function($){jQuery('.column.main').css('min-height',(jQuery(window).height()-jQuery('.page-header').height()-jQuery('.page-footer').height()));if(jQuery(window).width()<992){$this.modalPopUp(jQuery('.form.contact'),jQuery('.btn-mobile'),"contact-popup");}
if(jQuery(window).width()>992){jQuery('#maincontent').not('.checkout-index-index #maincontent,.checkout-onepage-success #maincontent').css('padding-top',jQuery('.header').outerHeight());}else{jQuery('#maincontent').css('padding-top',0);}});},fullWidthSlider:function($div){$div.slick({arrows:true,fade:false,dots:false,infinite:true,speed:300,autoplay:true,slidesToShow:1,slidesToScroll:1});},modalPopUp:function($div,$trigger,$specialClass){var options={type:'popup',responsive:true,innerScroll:true,modalClass:$specialClass,buttons:[{}]};$div.modal(options);$trigger.on('click',function(){$div.modal("openModal");});},autoOpenCart:function(){$('[data-block="minicart"]').on('contentLoading',function(event){$('[data-block="minicart"]').on('contentUpdated',function(){$('[data-block="minicart"]').find('[data-role="dropdownDialog"]').dropdownDialog("open");$('#header-cart-over').addClass('active');});});},productCarousle:function($div,$lnumber,$mnumber,$snumber,$arrows){$div.slick({arrows:true,dots:false,slidesToShow:$lnumber||4,slidesToScroll:2,infinite:true,autoplay:false,centerMode:false,focusOnSelect:true,responsive:[{breakpoint:992,settings:{slidesToShow:$mnumber||3,slidesToScroll:1,autoplay:true,}},{breakpoint:750,settings:{slidesToShow:$snumber||1,slidesToScroll:2,autoplay:true,centerMode:true,centerPadding:'40px'}}]});},smothScroll:function(){$('.smoth-scroll').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$('[name='+this.hash.slice(1)+']');if(target.length){if($(window).width()>750){loadingAnimation=true;$('html,body').animate({scrollTop:target.offset().top-jQuery('.header-container').height()},1000,function(){loadingAnimation=false;jQuery(window).scroll();});}
return false;}}});},scrollToTop:function(){jQuery(".scrollToTop").click(function(){$("html, body").animate({scrollTop:0},"slow");return false;});jQuery(".scrollToTop-about").click(function(){$("html, body").animate({scrollTop:0},"slow");return false;});var lastScrollTop=(jQuery(document).height())/2;jQuery(window).scroll(function(){var st=jQuery(this).scrollTop();if(st<lastScrollTop){jQuery(".scrollToTopright").removeClass('active');}else{jQuery(".scrollToTopright").addClass('active');}});jQuery(".scrollToTopright").click(function(){$("html, body").animate({scrollTop:0},"slow");return false;});$(window).scroll(function(){sessionStorage.scrollPos=$(window).scrollTop();});$(window).unload(function(){$(window).scrollTop(sessionStorage.scrollPos||0);});}}
$(function(){brm.init();});return brm;});