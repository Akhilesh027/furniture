define(['jquery','mage/translate','Magento_Ui/js/modal/confirm','jquery/ui','mage/validation/validation'],function($,$t,confirm){'use strict';$.widget('bb.ajaxCompare',{options:{ajaxCompare:{enabled:null,ajaxCompareUrl:null,ajaxRemoveCompareUrl:null,compareBtnSelector:'a.action.tocompare'},ajaxSuite:{processStart:'processStart',processStop:'processStop',enabled:null},confirmationMessage:$t('Are you sure you want to remove this item from your Compare Products list?')},_create:function(){this._bind();},_bind:function(){if((this.options.ajaxSuite.enabled==true)&&(this.options.ajaxCompare.enabled==true)){this.initEvents();}},isLoaderEnabled:function(){return(this.options.ajaxSuite.processStart&&this.options.ajaxSuite.processStop);},initEvents:function(){var self=this;$('body').on('click',this.options.ajaxCompare.compareBtnSelector,function(e){e.preventDefault();e.stopPropagation();var params=$(this).data('post').data,elem=$(this);if($(this).hasClass('remove')){confirm({content:self.options.confirmationMessage,actions:{confirm:function(){self.removeCompare(elem,params);},always:function(e){e.stopImmediatePropagation();}}});}else{self.addCompare(elem,params);}});},addCompare:function(elem,params){var self=this;$.ajax({url:self.options.ajaxCompare.ajaxCompareUrl,data:params,type:'post',dataType:'json',beforeSend:function(){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStart);}},success:function(res){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStop);}
elem.removeClass('add');elem.addClass('remove');elem.attr('title',$t('Added to Compare'));},error:function(res){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStop);}}});},removeCompare:function(elem,params){var self=this;$.ajax({url:self.options.ajaxCompare.ajaxRemoveCompareUrl,data:params,type:'post',dataType:'json',beforeSend:function(){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStart);}},success:function(res){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStop);}
elem.removeClass('remove');elem.addClass('add');elem.attr('title',$t('Add to Compare'));},error:function(res){if(self.isLoaderEnabled()){$('body').trigger(self.options.ajaxSuite.processStop);}}});},});return $.bb.ajaxCompare;});